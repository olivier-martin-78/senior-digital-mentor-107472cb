
<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <title>Senior Digital Mentor - Se former au digital √† mon rythme</title>
    <meta name="description" content="Senior Digital Mentor - Des activit√©s digitales qui me font du bien et me sentir moins seul(e)." />
    <meta name="author" content="Marie Durand" />
    
    <link rel="icon" href="/lovable-uploads/a18fae4a-22ff-4b00-88db-0dabc001de19.png" type="image/png">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap">

    <meta property="og:title" content="Senior Digital Mentor" />
    <meta property="og:description" content="Des activit√©s digitales qui me font du bien et me sentir moins seul(e)." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="/SeniorDigital.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@lovable_dev" />
    <meta name="twitter:image" content="/SeniorDigital.png" />
  </head>

  <body>
    <script>
      (function() {
        try {
          var path = window.location.pathname || '';
          if (path.indexOf('/mini-site/') === 0) {
            var last = path.substring('/mini-site/'.length);
            if (last && last.indexOf('.') !== -1) {
              var normalized = last.replace(/\./g, '-');
              var newUrl = '/mini-site/' + normalized + window.location.search + window.location.hash;
              if (newUrl !== window.location.href) {
                window.location.replace(newUrl);
              }
            }
          }
        } catch (e) {}
      })();
    </script>
    <!-- Debug ultra-basique - doit s'afficher m√™me si tout plante -->
    <div id="debug-status" style="position:fixed;top:0;left:0;background:lime;color:black;z-index:9999;padding:5px;font-size:12px;">
      HTML charg√©
    </div>
    
    <script>
      // Test de compatibilit√© syntaxique (optional chaining)
      (function(){
        var supportsOptionalChaining = (function(){ try { new Function('var x={a:1}; return x?.a')(); return true; } catch(e){ return false; }})();
        if (!supportsOptionalChaining) {
          var ds = document.getElementById('debug-status');
          if (ds) { ds.innerHTML = 'JS trop moderne (?.) non support√©'; ds.style.background = 'red'; ds.style.color = 'white'; }
        }
      })();
      // Emergency polyfills AVANT TOUT
      (function() {
        console.log('üî• EMERGENCY: Script de secours iOS Safari');
        
        // globalThis polyfill
        if (typeof globalThis === 'undefined') {
          console.log('üî• EMERGENCY: globalThis manquant, cr√©ation');
          try {
            Object.defineProperty(Object.prototype, '__magic__', {
              get: function() { return this; },
              configurable: true
            });
            __magic__.globalThis = __magic__;
            delete Object.prototype.__magic__;
          } catch(e) {
            window.globalThis = window;
          }
        }
        
        // Promise.allSettled polyfill pour Safari < 13
        if (!Promise.allSettled) {
          Promise.allSettled = function(promises) {
            return Promise.all(promises.map(p => 
              Promise.resolve(p).then(value => ({
                status: 'fulfilled',
                value: value
              }), error => ({
                status: 'rejected',
                reason: error
              }))
            ));
          };
        }
        
        console.log('üî• EMERGENCY: Polyfills install√©s');
        console.log('üî• EMERGENCY: globalThis disponible:', typeof globalThis !== 'undefined');
        console.log('üî• EMERGENCY: Promise.allSettled disponible:', typeof Promise.allSettled === 'function');
        console.log('üî• EMERGENCY: User Agent:', navigator.userAgent);
        
        // D√©tection iOS sp√©cifique
        var isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) || 
                   (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);
        console.log('üî• EMERGENCY: iOS d√©tect√©:', isIOS);
        
        // Update status avec plus d'infos
        var debugEl = document.getElementById('debug-status');
        if (debugEl) {
          debugEl.innerHTML = 'Emergency polyfills OK - iOS: ' + isIOS;
          debugEl.style.background = isIOS ? 'orange' : 'lime';
        }
      })();
      
      // Test module loading
      window.addEventListener('error', function(e) {
        console.error('üî• GLOBAL ERROR:', e.error, e.filename, e.lineno);
        document.getElementById('debug-status').innerHTML = 'ERREUR: ' + e.message;
        document.getElementById('debug-status').style.background = 'red';
        document.getElementById('debug-status').style.color = 'white';
      });
      
      // Test unhandled promise rejections  
      window.addEventListener('unhandledrejection', function(e) {
        console.error('üî• UNHANDLED REJECTION:', e.reason);
        document.getElementById('debug-status').innerHTML = 'PROMISE ERREUR: ' + e.reason;
        document.getElementById('debug-status').style.background = 'orange';
      });
      
      // Test si les modules se chargent
      setTimeout(() => {
        console.log('üî• TIMEOUT 2S: V√©rification chargement modules');
        if (!window.React) {
          document.getElementById('debug-status').innerHTML = 'Module non charg√© apr√®s 2s';
          document.getElementById('debug-status').style.background = 'yellow';
        }
      }, 2000);
    </script>
    
    <div id="root"></div>
    <!-- Scripts avec fallback iOS -->
    <!-- gptengineer.js charg√© dynamiquement depuis main.tsx -->
    <script type="module" src="/src/main.tsx" onerror="console.error('üî• EMERGENCY: √âchec chargement main.tsx'); document.getElementById('debug-status').innerHTML = 'ERREUR: main.tsx non charg√©'; document.getElementById('debug-status').style.background = 'red';"></script>
    
    <!-- Fallback absolu pour iOS si modules √©chouent -->
    <script>
      setTimeout(function() {
        if (!window.React && !document.querySelector('#root > *')) {
          console.error('üî• EMERGENCY: Aucun contenu charg√© apr√®s 3s');
          var debugEl = document.getElementById('debug-status');
          if (debugEl) {
            debugEl.innerHTML = '√âCHEC TOTAL - iOS Safari incompatible';
            debugEl.style.background = 'red';
            debugEl.style.color = 'white';
            debugEl.style.fontSize = '14px';
            debugEl.style.padding = '10px';
          }
          
          // Affichage d'urgence
          var root = document.getElementById('root');
          if (root && !root.innerHTML.trim()) {
            root.innerHTML = '<div style="padding:20px;font-family:Arial;background:#f0f0f0;margin:20px;border-radius:8px;"><h2 style="color:#d32f2f;">Probl√®me de compatibilit√© iOS Safari</h2><p>Cette page n\'est temporairement pas compatible avec votre navigateur iOS.</p><p>Essayez d\'ouvrir le lien dans un autre navigateur ou sur un ordinateur.</p><p style="font-size:12px;color:#666;">User Agent: ' + navigator.userAgent + '</p></div>';
          }
        }
      }, 3000);
    </script>
  </body>
</html>
